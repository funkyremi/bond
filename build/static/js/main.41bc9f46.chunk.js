(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(35)},18:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(4),i=a.n(r),l=(a(18),a(5)),o=a(6),d=a(11),s=a(7),m=a(12),g=a(8),u=a.n(g),f=a(9),h=a.n(f),b=a(10),v=a.n(b);a(31);function w(e){for(var t,a=e.inputBuffer.getChannelData(0),n=a.length,c=0,r=0;r<n;r++)t=a[r],Math.abs(t)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),c+=t*t;var i=Math.sqrt(c/n);this.volume=Math.max(i,this.volume*this.averaging)}a(33);var E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(s.a)(t).call(this,e))).state={records:[],recordStartTime:null,recording:!1},a.chunks=[],a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(navigator.mediaDevices.getUserMedia){console.log("getUserMedia supported.");navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){var a=new AudioContext,n=a.createMediaStreamSource(t),c=function(e,t,a,n){var c=e.createScriptProcessor(512);return c.onaudioprocess=w,c.clipping=!1,c.lastClip=0,c.volume=0,c.clipLevel=t||.98,c.averaging=a||.95,c.clipLag=n||750,c.connect(e.destination),c.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},c.shutdown=function(){this.disconnect(),this.onaudioprocess=null},c}(a);n.connect(c);var r=0;setInterval(function(){e.state.recording?c.volume<.005?3e3===(r+=100)&&((new Date).getTime()-e.state.recordStartTime.getTime()<4e3?(e.mediaRecorder.stop(),e.setState({recording:!1,recordStartTime:null})):e.stop(),r=0):r=0:c.volume>.005&&e.record()},100),e.mediaRecorder=new MediaRecorder(t),e.mediaRecorder.ondataavailable=function(t){e.chunks.push(t.data)}},function(e){console.log("The following error occured: "+e)})}else console.log("Function not supported by the browser")}},{key:"record",value:function(){this.setState({recording:!0,recordStartTime:new Date}),this.chunks=[],this.mediaRecorder.start(),console.log(this.mediaRecorder.state),console.log("recorder started")}},{key:"stop",value:function(){this.mediaRecorder.stop();var e=new Blob(this.chunks,{type:"audio/ogg; codecs=opus"}),t=this.state.records,a=this.state.recordStartTime,n=(new Date).getTime()-a.getTime();console.log(n),t.unshift({id:u()(),date:new Date,url:window.URL.createObjectURL(e),recordStartTime:this.state.recordStartTime,recordEndTime:new Date}),this.setState({records:t,recording:!1,recordStartTime:null})}},{key:"getDuration",value:function(e,t){return h()(t-e,{round:!0})}},{key:"formatTime",value:function(e){return v()(e).format("HH:mm:ss")}},{key:"togglePlayback",value:function(e){var t=this.refs[e];console.log(t),t.paused?t.play():t.pause()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{id:"bars"},c.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),c.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),c.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),c.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),c.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),c.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),c.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),c.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),c.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),c.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")})),c.a.createElement("div",null,this.state.records.map(function(t){return c.a.createElement("div",{className:"record clickable",key:t.id,onClick:function(){return e.togglePlayback(t.id)}},c.a.createElement("span",{className:"float-left record-info"},c.a.createElement("span",null,e.formatTime(t.date))),c.a.createElement("span",{className:"float-right record-info"},c.a.createElement("span",null,e.getDuration(t.recordStartTime,t.recordEndTime))),c.a.createElement("audio",{ref:t.id,src:t.url}))}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,2,1]]]);
//# sourceMappingURL=main.41bc9f46.chunk.js.map