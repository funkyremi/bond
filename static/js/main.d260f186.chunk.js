(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,a,t){e.exports=t(47)},23:function(e,a,t){},43:function(e,a,t){},47:function(e,a,t){"use strict";t.r(a);var n=t(6),r=t.n(n),c=t(11),o=t.n(c),i=(t(23),t(1)),d=t(2),l=t(5),s=t(3),g=t(4),m=t(12),f=t.n(m),b=t(13),v=t.n(b),u=t(14),p=t.n(u),k=(t(36),t(17)),w=t(16),E=t.n(w);t(43);window.MediaRecorder=t(45);var y=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(l.a)(this,Object(s.a)(a).call(this,e))).state={records:[],recordStartTime:null,recording:!1},t}return Object(g.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(a){var t=new k.a,n=t.createMediaStreamSource(a),r=(new Date).getTime(),c=E()(t,{},function(a){e.state.recording?a<5?(new Date).getTime()-r>=3e3&&e.stopRecording():r=(new Date).getTime():a>5&&!e.playbackInProgress()&&e.startRecording()});a.onended=c.stop.bind(c),n.connect(c),e.mediaRecorder=new MediaRecorder(a),e.mediaRecorder.addEventListener("dataavailable",function(a){if(e.mediaRecorder.stream.getTracks().forEach(function(e){return e.stop()}),(new Date).getTime()-e.state.recordStartTime.getTime()>4e3){var t=e.state.records,n=window.URL.createObjectURL(a.data);t.unshift({id:f()(),date:e.state.recordStartTime,url:n,paused:!0,recordStartTime:e.state.recordStartTime,recordEndTime:new Date}),e.setState({records:t,recording:!1,recordStartTime:null})}else e.setState({recording:!1,recordStartTime:null})})},function(e){console.error(e)})}else console.error("Browser doesn't allow audio recording")}},{key:"startRecording",value:function(){this.setState({recording:!0,recordStartTime:new Date}),this.mediaRecorder.start()}},{key:"stopRecording",value:function(){this.mediaRecorder.stop()}},{key:"playbackInProgress",value:function(){return this.state.records.find(function(e){return!e.paused})}},{key:"toggleRecord",value:function(){!0===this.state.recording?this.stopRecording():this.startRecording()}},{key:"getDuration",value:function(e,a){return v()(a-e,{round:!0})}},{key:"formatTime",value:function(e){return p()(e).format("DD/MM/YYYY HH:mm:ss")}},{key:"removeRecord",value:function(e){var a=this.state.records,t=a.findIndex(function(a){return a.id===e});t>-1&&(a.splice(t,1),this.setState({records:a}))}},{key:"togglePlayback",value:function(e){var a=this.refs[e];a.paused?a.play():(a.pause(),a.currentTime=0)}},{key:"handlePlay",value:function(e){var a=this.state.records,t=a.findIndex(function(a){return a.id===e});t>-1&&(a[t].paused=!1,this.setState({records:a}))}},{key:"handlePause",value:function(e){var a=this.state.records,t=a.findIndex(function(a){return a.id===e});t>-1&&(a[t].paused=!0,this.setState({records:a}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"bars"},r.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),r.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),r.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),r.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),r.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),r.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),r.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),r.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),r.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),r.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")})),r.a.createElement("div",null,this.state.records.map(function(a){return r.a.createElement("div",{className:"record",key:a.id},a.paused?r.a.createElement("i",{className:"fas fa-2x fa-play-circle clickable float-left playback-button",title:"Play",onClick:function(){return e.togglePlayback(a.id)}}):r.a.createElement("i",{className:"fas fa-2x fa-pause-circle clickable float-left playback-button",title:"Pause",onClick:function(){return e.togglePlayback(a.id)}}),r.a.createElement("span",{className:"text-center"},e.formatTime(a.date)," (",e.getDuration(a.recordStartTime,a.recordEndTime),")"),r.a.createElement("span",{title:"Remove record",className:"float-right clickable margin-left-sm",onClick:function(){return e.removeRecord(a.id)}},r.a.createElement("i",{className:"fas fa-lg fa-trash-alt"})),r.a.createElement("span",{title:"Download record",className:"float-right"},r.a.createElement("a",{href:a.url,className:"text-black",download:"record ".concat(e.formatTime(a.date),".wav")},r.a.createElement("i",{className:"fas fa-lg fa-download"}))),r.a.createElement("audio",{onPlay:function(){return e.handlePlay(a.id)},onPause:function(){return e.handlePause(a.id)},ref:a.id,src:a.url}))}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,2,1]]]);
//# sourceMappingURL=main.d260f186.chunk.js.map