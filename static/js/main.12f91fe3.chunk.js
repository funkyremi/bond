(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(35)},18:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(4),c=a.n(i),o=(a(18),a(5)),s=a(6),d=a(11),l=a(7),u=a(12),m=a(8),h=a.n(m),g=a(9),v=a.n(g),p=a(10),f=a.n(p);a(31);function b(e){for(var t,a=e.inputBuffer.getChannelData(0),r=a.length,n=0,i=0;i<r;i++)t=a[i],Math.abs(t)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),n+=t*t;var c=Math.sqrt(n/r);this.volume=Math.max(c,this.volume*this.averaging)}a(33);var w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(l.a)(t).call(this,e))).state={records:[],recordStartTime:null,recording:!1},a.chunks=[],a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){var a=new AudioContext,r=a.createMediaStreamSource(t),n=function(e,t,a,r){var n=e.createScriptProcessor(512);return n.onaudioprocess=b,n.clipping=!1,n.lastClip=0,n.volume=0,n.clipLevel=t||.98,n.averaging=a||.95,n.clipLag=r||750,n.connect(e.destination),n.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},n.shutdown=function(){this.disconnect(),this.onaudioprocess=null},n}(a);r.connect(n),e.mediaRecorder=new MediaRecorder(t),e.mediaRecorder.ondataavailable=function(t){e.chunks.push(t.data)};var i=0;setInterval(function(){e.state.recording?n.volume<.01?3e3===(i+=100)&&((new Date).getTime()-e.state.recordStartTime.getTime()<4e3?(e.mediaRecorder.stop(),e.setState({recording:!1,recordStartTime:null})):e.stop(),i=0):i=0:n.volume>.01&&e.record()},100)},function(e){})}}},{key:"record",value:function(){this.setState({recording:!0,recordStartTime:new Date}),this.chunks=[],this.mediaRecorder.start()}},{key:"stop",value:function(){this.mediaRecorder.stop();var e=new Blob(this.chunks,{type:"audio/wav"}),t=this.state.records,a=window.URL.createObjectURL(e);t.unshift({id:h()(),date:new Date,url:a,recordStartTime:this.state.recordStartTime,recordEndTime:new Date}),this.setState({records:t,recording:!1,recordStartTime:null})}},{key:"getDuration",value:function(e,t){return v()(t-e,{round:!0})}},{key:"formatTime",value:function(e){return f()(e).format("HH:mm:ss")}},{key:"togglePlayback",value:function(e){var t=this.refs[e];t.paused?t.play():t.pause()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{id:"bars"},n.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),n.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),n.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),n.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),n.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),n.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),n.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),n.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),n.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")}),n.a.createElement("div",{className:"bar ".concat(this.state.recording&&"bg-red")})),n.a.createElement("div",null,this.state.records.map(function(t){return n.a.createElement("div",{className:"record clickable",key:t.id,onClick:function(){return e.togglePlayback(t.id)}},n.a.createElement("span",{className:"float-left record-info"},n.a.createElement("span",null,e.formatTime(t.date))),n.a.createElement("span",{className:"float-right record-info"},n.a.createElement("span",null,e.getDuration(t.recordStartTime,t.recordEndTime))),n.a.createElement("audio",{ref:t.id,id:t.id,src:t.url}))}))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,2,1]]]);
//# sourceMappingURL=main.12f91fe3.chunk.js.map